<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=utf-8">
  <link rel="stylesheet" type="text/css" href="css/gollum.css" media="all">
  <link rel="stylesheet" type="text/css" href="css/editor.css" media="all">
  <link rel="stylesheet" type="text/css" href="css/dialog.css" media="all">
  <link rel="stylesheet" type="text/css" href="css/template.css" media="all">
  
  <!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="css/ie7.css" media="all">
  <![endif]-->
  
  <script type="text/javascript" src="css/jquery.js"></script>
  <script type="text/javascript" src="css/gollum.js"></script>
  <script type="text/javascript" src="css/gollum.dialog.js"></script>
  <script type="text/javascript" src="css/gollum.placeholder.js"></script>
  
  <script type="text/javascript" 
    src="css/editor/gollum.editor.js"></script>
  <title>Implementations</title>
</head>
<body>

<div id="wiki-wrapper" class="page">
<div id="head"><h3><a href="../../index.html">TinkerPop 2.4.0</a> - <a href="Home.html">Blueprints</a></h3>
  <h1>Implementations</h1>
  <ul class="actions">
    <li class="minibutton"><a href="/pages"
      class="action-all-pages">All Pages</a></li>
    <li class="minibutton" class="jaws">
      <a href="#" id="minibutton-new-page">New Page</a></li>
    <li class="minibutton"><a href="/edit/Implementations"
       class="action-edit-page">Edit Page</a></li>
    <li class="minibutton"><a href="/history/Implementations"
       class="action-page-history">Page History</a></li>
  </ul>
  <div id="searchbar">
    <form action="/search" method="get" id="search-form">
    <div id="searchbar-fauxtext">
      <input type="text" name="q" id="search-query" value="Search&hellip;" autocomplete="off">
      <a href="#" id="search-submit" title="Search this wiki">
        <span>Search</span>
      </a>
    </div>
    </form>
  </div></div>
<div id="wiki-content">
  <div class="wrap">
  <div id="wiki-body" class="gollum-textile-content">
    <div id="template">
      <p><img src="images/impls.png" alt="" /></p>
<p>In order to connect a graph database to Blueprints, the Blueprints property graph interfaces must be implemented. For non-native Blueprints graph databases, the raw graph database <span class="caps">API</span> and the Blueprints <span class="caps">API</span> need to be coupled. For native Blueprints graph databases, no such coupling is needed as only the interfaces need to be implemented. Each subsection discusses the various implementations of the Blueprints interfaces maintained by the main Blueprints distribution.</p>
<p><strong><span class="caps">DEPENDENCY</span> <span class="caps">NOTE</span></strong>: It is important to note that including a <code>&lt;dependency/&gt;</code> to Blueprints does not entail all the respective graph database/framework dependencies distributed with Blueprints. The reason for this is that it allows users to include only those graph implementations they wish for their particular projects (e.g. based on licensing, size, performance, etc.).</p>
<h1>Developer Notes</h1>
<p><span class="float-left"><span><img src="https://raw.github.com/tinkerpop/blueprints/master/doc/images/blueprints-character-1.png" width="120px" /></span></span></p>
<p>This section defines the general rules and standards by which Blueprints implementations are expected to work.  By following these implementation details, developers implementing the Blueprints <span class="caps">API</span> can expect consistent operations throughout the <a href="../../index.html">TinkerPop</a> stack.  Many of these details are enforced by the Blueprints <a class="internal present" href="Property-Graph-Model-Test-Suite.html">Property Graph Model Test Suite</a>, so there will be little choice in those areas when it comes to implementation, however others are merely convention and not explicitly enforced.  Choosing not to following convention will introduce risk that the implementation will not work as expected elsewhere in the stack.</p>
<p>To be considered a <em>recognized</em> Blueprints implementation (i.e. included on the Blueprints wiki as a third-party implementation, or otherwise promoted by TinkerPop), the implementation must meet these conditions:</p>
<ol><li>It must pass the Blueprints Test Suite.</li>
	<li>It must include a Rexster configuration class.</li>
	<li>It must include some form of documentation (e.g. <span class="caps">README</span>.md, wiki, etc.)</li>
</ol><p>Those offering Blueprints implementations are encouraged to use the <a href="https://groups.google.com/forum/?fromgroups#!forum/gremlin-users">gremlin-users</a> mailing list to announce their releases and feature updates, as well as a to provide support to the community on usage.</p>
<h2>getVertex/Edge</h2>
<p>The <code>getVertex</code> and <code>getEdge</code> methods on the <code>Graph</code> class accept an <code>object</code> type as the parameter for the respective vertex or edge identifier.  Always coerce that identifier to its expected type.  If the underlying graph, only expects a <code>long</code> as an identifier, then ensure that the parameter is converted to a long (as it may come in as a <code>String</code> or other such value).  If the identifier cannot be coerced to its expected type then simply return <code>null</code>.</p>
<p>The identifier parameter cannot be <code>null</code> and if it is an exception should immediately be thrown:</p>
<pre><code>if (null == id)
    throw ExceptionFactory.vertexIdCanNotBeNull();</code></pre>
<h2>Deprecation</h2>
<p>Some methods of the Blueprints <span class="caps">API</span> are marked as <code>@deprecated</code>.  While this annotation does mean that the method is bound for future removal from the <span class="caps">API</span>, it may be smart to implement it anyway for backward compatibility with the rest of the stack.  Generally speaking other elements of the stack that depend on Blueprints, such as Rexster, will attempt to delay upgrade to newer methods over older ones in an effort to stay compatible with as many older Blueprints versions as possible.  The other reason to implement the deprecated methods is to allow users with older code to easily swap in the newly built implementation without having to make a lot of changes to their code that they may not be prepared to make.</p>
<h2>Rexster Support</h2>
<p>To be a complete Blueprints implementation it is important to make it possible to expose a Blueprints implementation through Rexster.  Doing do has the following benefits:</p>
<ul><li>Accessibility of the implementation through to the top of the TinkerPop stack.</li>
	<li>Makes the implementation consumable by the widest group of possible users as Rexster enables access to the graph through any language.</li>
	<li>Through Rexster the implementation is consumable through other tools and frameworks, like <a href="http://bulbflow.com">Bulbs</a>, <a href="https://github.com/StartTheShift/thunderdome">Thunderdome</a>, <a href="http://faunus.thinkaurelius.com">Faunus</a>, etc.</li>
</ul><p>Adding Rexster Support usually just involves the creation of a single class file. This blog <a href="http://stephen.genoprime.com/2012/05/03/graph-configuration-in-rexster.html">post</a> discusses how to create a configuration and samples of the TinkerPop maintained Blueprints implementations can be found <a href="https://github.com/tinkerpop/rexster/tree/master/rexster-server/src/main/java/com/tinkerpop/rexster/config">here</a>.</p>
<h2>GraphFactory Support</h2>
<p>Blueprints provides a <a href="https://github.com/tinkerpop/blueprints/wiki/Code-Examples#use-graphfactory">GraphFactory</a>, which allows for a generic way to instantiate <code>Graph</code> implementations.  To support <code>GraphFactory</code>, a the library must provide either or both of the following:</p>
<ul><li>A <code>Graph</code> implementation constructor that takes a single argument of type <code>org.apache.commons.configuration.Configuration</code>.</li>
	<li>A static <em>factory</em> method that has a method called <code>open</code> that takes a single argument of type <code>org.apache.commons.configuration.Configuration</code>.</li>
</ul><p>It is up to each <code>Graph</code> implementation to define what the <code>Configuration</code> object contains, but generally speaking, it is expected that it will contain name-value pairs.</p>
<p>Blueprints uses a standard whereby the name in the pair is prefixed with <code>blueprints.graphname</code>, where the <em>graphname</em> refers to a friendly name of the <code>Graph</code> implementation. For example, <code>Neo4jGraph</code> has a friendly configuration name of <code>neo4j</code> and therefore a complete configuration name would look like: <code>blueprints.neo4j.directory</code>.</p>
<h2>Other Tests</h2>
<p>In addition to the Blueprints Test Suite, developers have the option to test their implementations with other test suites higher in the stack.  These tests can help uncover other problems that the Blueprints tests don&#x2019;t (however, efforts are made to push the logic higher level tests down to Blueprints when problems are found).  Running these tests can provide additional confidence that there is consistency all the way to the top of the TinkerPop stack.</p>
<h3>Rexster Integration Tests</h3>
<p><a href="../../rexster/2.4.0/Home.html">Rexster</a> has a suite of integration tests that runs across multiple graphs to validate operational consistency of implementations.  It is assumed that the Blueprints implementation being tested has a configuration class so that it can be configured to run in Rexster. To run the tests:</p>
<p>1. Copy the jar file of the Blueprints implementation to the <code>REXSTER_HOME/ext</code> directory.<br />
1. Pull the Rexster source code from GitHub and edit the <a href="https://github.com/tinkerpop/rexster/blob/master/rexster-server/src/integration/resources/com/tinkerpop/rexster/rexster-integration-test.xml">rexster.xml</a> used by the integration tests to include the graph configuration to include in the tests.<br />
1. Execute: <code>mvn clean install -Pintegration-test</code> from the command line.</p>
<h3>RexsterGraph Tests</h3>
<p>The <a class="internal present" href="Rexster-Implementation.html">RexsterGraph</a> runs the Property Graph Model Test Suite over a running instance of Rexster.  By default, the tests for <code>RexsterGraph</code> are disabled.  It is assumed that the Blueprints implementation being tested has a configuration class so that it can be configured to run in Rexster. To run these tests:</p>
<p>1. Pull the source code for Blueprints from GitHub and edit the <a href="https://github.com/tinkerpop/blueprints/blob/master/blueprints-rexster-graph/pom.xml">pom.xml</a> file.  Change the <code>-DtestRexsterGraph=false</code> to <code>-DtestRexsterGraph=true</code> so that the tests will be enabled.<br />
1. In Rexster, edit the <code>rexster.xml</code> file to include the Blueprints implementation to be tested.  By default the <code>rexsterGraph</code> tests try to use a graph named <code>emptygraph</code>, which is configured in the default <code>rexster.xml</code> as a <a class="internal present" href="TinkerGraph.html">TinkerGraph</a>.  Either edit that configuration to be for the new graph or change the <code>RexsterGraph</code> <code>pom.xml</code> to point at a different graph by changing this settings: <code>-DrexsterGraphURI=http://127.0.0.1:8182/graphs/emptygraph</code><br />
1. Start Rexster with: <code>rexster.sh -s</code><br />
1. Run <code>mvn clean install</code> on <code>RexsterGraph</code> from the command line.</p>
    </div>
  </div>
  </div>

</div>
<div id="footer">
  <p id="last-edit">Last edited by <b>stephen mallette</b>, 2013-08-03 13:19:14</p>
</div>
</div>

<script type="text/javascript" src="css/MathJax/MathJax.js"></script>


</body>
</html>
